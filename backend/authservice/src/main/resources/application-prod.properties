# =============================================
# üåê APPLICATION CONFIGURATION
# =============================================

# üåê MongoDB Atlas Connection (uses environment variable)
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://ytterstick:vQjnfLWfTnN43tyf@starwash-cluster.fp7frav.mongodb.net/starwashDB?retryWrites=true&w=majority&connectTimeoutMS=3000&socketTimeoutMS=3000}
spring.data.mongodb.database=starwashDB
spring.data.mongodb.auto-index-creation=true

# üîê JWT Configuration
app.jwt.secret=GjR9q3vDdLkN4sWp7fMZeUu62q9bTgWjxYvMsXzEhABq
app.jwt.expiration=43200000

# üåç Server Configuration (Render uses port 10000)
server.port=${PORT:10000}
server.servlet.context-path=/api

# =============================================
# üïê COMPREHENSIVE TIMEZONE CONFIGURATION (GMT+8)
# =============================================

# JVM Timezone Settings (Critical for date handling)
user.timezone=Asia/Manila
java.awt.headless=true

# Jackson JSON Timezone Configuration
spring.jackson.time-zone=Asia/Manila
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.adjust-dates-to-context-time-zone=true
spring.jackson.date-format=com.fasterxml.jackson.databind.util.ISO8601DateFormat
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false

# Date/Time serialization format
spring.jackson.serialization.WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS=false
spring.jackson.deserialization.READ_DATE_TIMESTAMPS_AS_NANOSECONDS=false

# =============================================
# üì± SMS SERVER CONFIGURATION
# =============================================

# SMS Server Configuration - Use environment variable or default to localhost
sms.server.url=${SMS_SERVER_URL:http://localhost:5000/send-sms}

# CORS Configuration - Your actual domain
cors.allowed-origins=https://starwashph.com,https://www.starwashph.com

# For Render health checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.db.enabled=true

# Render-specific settings
management.server.port=${PORT:10000}
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-components=always
management.health.diskspace.enabled=true

# Logging (production appropriate)
logging.level.com.starwash=INFO
logging.level.org.springframework=WARN
logging.level.org.mongodb=WARN
logging.level.org.hibernate=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# MongoDB driver logging
logging.level.org.mongodb.driver=WARN

# Connection pool settings
spring.data.mongodb.auto-index-creation=true

# JPA/Hibernate settings (if using)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Manila

# Validation settings
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# Server optimization for Render
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Shutdown configuration for graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# =============================================
# üóÑÔ∏è CACHE CONFIGURATION
# =============================================

# Spring Cache configuration
spring.cache.type=simple
spring.cache.cache-names=laundryJobs,machines,transactions

# =============================================
# üîß REST TEMPLATE CONFIGURATION
# =============================================

# RestTemplate timeout configuration
rest.template.connect-timeout=5000
rest.template.read-timeout=15000